(this["webpackJsonpstrava-leaderboard"]=this["webpackJsonpstrava-leaderboard"]||[]).push([[0],{11:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),s=(a(16),a(2)),o=a(3),l=a(5),u=a(4),d=(a(17),a(6)),m=a.n(d),h=a(1),f=a(8),b=a(7),p=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={activities:[],tableHead:["Position","Name","No. Runs","Run Distance","No. Cycles","Cycle Distance","Total Complete"],tableHeadSecond:["Date","Activity","Distance","Activity Time","Average Speed"],user:""},n}return Object(o.a)(a,[{key:"getHeader",value:function(e){return e.map((function(e,t){return r.a.createElement("th",{key:t,style:{padding:"5px 10px",borderBottom:"1px solid black"}},e)}))}},{key:"setUser",value:function(e){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{user:e}))}},{key:"getRowsData",value:function(e,t){var a=this,n=t+1,c=e.name,i=e.runQuantity,s=e.runDistance,o=e.bikeQuantity,l=e.bikeDistance,u=e.totalPercent;return r.a.createElement("tr",{onClick:function(){return a.setUser(c)}},r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},n),r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},c," ",100==u?"(completed)":""),r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},i),r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},s," km"),r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},o),r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},l," km"),r.a.createElement("td",{key:t,style:{padding:"5px 0",borderBottom:"1px solid black"}},u.toFixed(2),"%"))}},{key:"sepMethod",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",{key:2e3},"-----"),r.a.createElement("td",{key:2e3},"-----"),r.a.createElement("td",{key:2e3},"---------"),r.a.createElement("td",{key:2e3},"--------"),r.a.createElement("td",{key:2e3},"--------"))}},{key:"getDetailRowsData",value:function(e,t){var a=e.allRuns?e.allRuns.map((function(e,a){var n=e.distance/1e3,c=e.moving_time/60,i=(e.distance/1e3).toFixed(2),s=(e.moving_time/60).toFixed(0),o=1/(n/(c/60))*60,l=Math.floor(o),u=(l+.6*(o-l)).toFixed(2),d=e.start_date.substr(8,2),m=e.start_date.substr(5,2);return r.a.createElement("tr",null,r.a.createElement("td",{key:t*a+5},d,"/",m),r.a.createElement("td",{key:t*a},"Run"),r.a.createElement("td",{key:t*a+1},i," km"),r.a.createElement("td",{key:t*a+2},s," mins"),r.a.createElement("td",{key:t*a+3},u," /km"))})):[],n=e.allCycles?e.allCycles.map((function(e,a){var n=(e.distance/1e3).toFixed(2),c=(e.moving_time/60).toFixed(0),i=(n/(c/60)).toFixed(1),s=e.start_date.substr(8,2),o=e.start_date.substr(5,2);return r.a.createElement("tr",null,r.a.createElement("td",{key:t*a+5},s,"/",o),r.a.createElement("td",{key:t*a},"Cycle"),r.a.createElement("td",{key:t*a+1},n," km"),r.a.createElement("td",{key:t*a+2},c," mins"),r.a.createElement("td",{key:t*a+3},i," km/h"))})):[],c=this.sepMethod(),i=a;return a.length>0&&n.length>0&&(i=i.concat(c)),i.concat(n)}},{key:"extraSection",value:function(e){var t=this,a=this.state.user,n=e.map((function(e){return e.name===a?e:[]}));return""===a?r.a.createElement("br",null):r.a.createElement("table",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"20px",border:"1px solid black"}},r.a.createElement("thead",null,r.a.createElement("tr",null,this.getHeader(this.state.tableHeadSecond))),r.a.createElement("tbody",null,n.map((function(e,a){return t.getDetailRowsData(e,a)}))))}},{key:"render",value:function(){var e=this,t=this.props.allRows,a=t.length>0?t.sort((function(e,t){return e.totalPercent>t.totalPercent?-1:1})):[];return r.a.createElement("div",null,r.a.createElement("table",{style:{marginLeft:"auto",marginRight:"auto",marginTop:"20px",border:"1px solid black"}},r.a.createElement("thead",null,r.a.createElement("tr",null,this.getHeader(this.state.tableHead))),r.a.createElement("tbody",null,a.map((function(t,a){return e.getRowsData(t,a)})))),this.extraSection(a))}}]),a}(n.Component),y=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).state={activities:[],users:[],distances:{},month:"",monthNumber:""},n}return Object(o.a)(a,[{key:"fetchData",value:function(){var e=Object(b.a)(m.a.mark((function e(t,a,n){var r,c,i=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://www.strava.com/oauth/token",r="",e.next=4,fetch("https://www.strava.com/oauth/token",{method:"post",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"},body:JSON.stringify({client_id:t,client_secret:a,refresh_token:n,grant_type:"refresh_token"})}).then((function(e){return e.json()})).then((function(e){return r=e.access_token}));case 4:return c="https://www.strava.com/api/v3/athlete/activities?access_token="+r,e.next=7,fetch(c).then((function(e){return e.json()})).then((function(e){var t=Object(f.a)(i.state.activities).concat(e);i.setState(Object(h.a)(Object(h.a)({},i.state),{},{activities:t}))}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"setDistance",value:function(e){return 0===e?{run:40,cycle:130}:{run:30,cycle:100}}},{key:"setMonth",value:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()-e],a=1-e,n=this.setDistance(e);console.log(t),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{month:t,monthNumber:a,distances:n}))}},{key:"reAuthFunc",value:function(){var e=Object(b.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setMonth(0);case 2:return e.next=4,this.setUsers();case 4:this.state.users.forEach((function(e){t.fetchData(e.info.id,e.info.secret,e.info.refresh)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setUsers",value:function(){this.setState(Object(h.a)(Object(h.a)({},this.state),{},{users:[{name:"Raj",athleteID:"59236473",info:{id:"48974",secret:"4175dc3bd00b8a4ce14886912b653faa6b041b2c",refresh:"1bd817b355142a3fb162f46d2ee0e221f20fe315"}},{name:"Ross",athleteID:"53092595",info:{id:"49144",secret:"fd67f97dc6d6d79faf65a179604ffc40337cf879",refresh:"beae09e78a559017ce9b83230b5f014cdefff4f9"}},{name:"Cally",athleteID:"59236853",info:{id:"49145",secret:"a9cd2fef4bcdf252a21aa18fa833cff22fc5fd1a",refresh:"e5f6d38f8d3df4a5ef99ac03fe9ad55f16fa2b3a"}}]}))}},{key:"componentDidMount",value:function(){this.reAuthFunc()}},{key:"findAllSpecificActivity",value:function(e,t){var a=Object(f.a)(this.state.activities),n=this.state.monthNumber,r=(new Date).getMonth()+n;return a.filter((function(a){var n=a.start_date.substr(5,2);return a.type===e&&n==r&&a.athlete.id==t}))}},{key:"getAllKm",value:function(e,t){return Math.round(e+t.distance)}},{key:"createUserObj",value:function(e,t){var a=this.state.distances.run,n=this.state.distances.cycle,r=this.findAllSpecificActivity("Run",e),c=r.length>0?r.reduce(this.getAllKm,0)/1e3:0,i=c>a?100:c/a*100,s=this.findAllSpecificActivity("Ride",e),o=s.length>0?s.reduce(this.getAllKm,0)/1e3:0,l=o>n?100:o,u=(i+l)/2;return{name:t,runQuantity:r.length,runDistance:c,runPercentage:i,bikeQuantity:s.length,bikeDistance:o,bikePercentage:l,totalPercent:u,allRuns:r,allCycles:s}}},{key:"render",value:function(){var e=this,t=this.state.users,a=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date,c=a[n.getMonth()-1],i=a[n.getMonth()],s=this.state.month,o=t.map((function(t){return e.createUserObj(t.athleteID,t.name)}));return r.a.createElement("div",null,r.a.createElement("h2",{style:{padding:"20px 20px 0 20px"}},"Boys Dualathalon"),r.a.createElement("button",{style:{color:"black",backgroundColour:"white",border:"2px solid #808080",marginRight:"5px"},onClick:function(){return e.setMonth(1)}},c),r.a.createElement("button",{style:{color:"black",backgroundColour:"white",border:"2px solid #808080",marginLeft:"5px"},onClick:function(){return e.setMonth(0)}},i),r.a.createElement("h4",{style:{paddingTop:"10px"}},s," Challenge"),r.a.createElement("h6",null,"Run ",this.state.distances.run," km  |  Cycle ",this.state.distances.cycle," km"),r.a.createElement(p,{allRows:o}))}}]),a}(n.Component),k=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(y,null))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.a02d3228.chunk.js.map